!function(a){a.fn.glanceyear=function(b,c){function w(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg",a);for(var d in b)c.setAttribute(d,b[d]);return c}function x(b){var c=0;for(var f in b)d.find('rect.day[data-date="'+b[f].date+'"]').attr("data-count",b[f].value),c+=parseInt(b[f].value);a(e.targetQuantity).text(b.length+" days, "+c+" scores")}function y(a){return e.months[a]}function z(a){return e.weeks[a]}function A(a){return y(a.getMonth())+" "+a.getDate()+", "+a.getFullYear()}function B(a){return 32-new Date(a.getFullYear(),a.getMonth(),32).getDate()}for(var j,d=a(this),e=a.extend({eventClick:function(a){alert("Date: "+a.date+", Count:"+a.count)},months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weeks:["M","T","W","T","F","S","S"],targetQuantity:".glanceyear-quantity",tagId:"glanceyear-svgTag",showToday:!1,today:new Date},c),f=w("svg",{width:663,height:99}),g=w("g",{transform:"translate(15, 15)"}),h=a("<div>").addClass("svg-tag").attr("id",e.tagId).appendTo(a("body")).hide(),i=366,k=0;54>k;k++){var l=w("g",{transform:"translate("+12*k+",0)"}),m=new Date;m.setMonth(e.today.getMonth()),m.setFullYear(e.today.getFullYear()),m.setDate(e.today.getDate()-i-1);for(var n=B(m)-m.getDate(),o=m.getDay();7>o;o++){var p=new Date;if(p.setMonth(e.today.getMonth()),p.setFullYear(e.today.getFullYear()),p.setDate(e.today.getDate()-i),p.getMonth()!=j&&52>k&&o>3&&n>7){var q=w("text",{x:12*k,y:"-6","class":"month"});q.textContent=y(p.getMonth()),g.appendChild(q),j=p.getMonth()}if(i--,i>=0||e.showToday&&i>=-1){var r=w("rect",{"class":"day",width:"10px",height:"10px","data-date":p.getFullYear()+"-"+(p.getMonth()+1)+"-"+p.getDate(),y:12*o});r.onmouseover=function(){var b=a(this).attr("data-date").split("-"),c=new Date(b[0],b[1]-1,b[2]),d=A(c),e=a(this).attr("data-count"),f=a(this).attr("data-count");e=f?f>1?a(this).attr("data-count")+" scores":a(this).attr("data-count")+" score":"No scores",h.html("<b>"+e+"</b> on "+d).show().css({left:a(this).offset().left-h.outerWidth()/2+5,top:a(this).offset().top-33})},r.onmouseleave=function(){h.text("").hide()},r.onclick=function(){e.eventClick({date:a(this).attr("data-date"),count:a(this).attr("data-count")||0})},l.appendChild(r)}}g.appendChild(l)}var s=w("text",{x:"-14",y:"8"});s.textContent=z(0),g.appendChild(s);var t=w("text",{x:"-14",y:"32"});t.textContent=z(2),g.appendChild(t);var u=w("text",{x:"-14",y:"56"});u.textContent=z(4),g.appendChild(u);var v=w("text",{x:"-14",y:"80"});v.textContent=z(6),g.appendChild(v),f.appendChild(g),d.append(f),x(b)}}(jQuery);